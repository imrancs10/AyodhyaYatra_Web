@model  List<AyodhyaYatra_Web.Models.Visitor.VisitorResponse>
@using AyodhyaYatra_Web.Resources;
@{
    ViewData["Title"] = "VisitorPass";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section>
    <div class="gap black-layer opc8 inner-banner">
        <div class="fixed-bg set-imagebloc" style="background-image: url(../Content/wp-content/uploads/photo.webp);"></div>
        <div class="container">
            <div class="pg-tp-wrp text-center" style="padding-top:50px">
                <div class="pg-tp-inr">
                    <h1 itemprop="headline">@Resource.VisitorPassSearch</h1>
                    <ol class="breadcrumb brd-rd30"><li class="breadcrumb-item"><a href="#">@Resource.VisitorPassSearch >> </a> </li></ol>
                </div>
            </div><!-- Page Top Wrap -->
        </div>
    </div>
</section>
<div id="main" class="page-content">
    <div class="container">
        <div class="row">
            <div class="col-12" style="text-align:center">
                <h2>@Resource.VisitorPass</h2>

                <form asp-action="VisitorPassSearch" method="post">
                    <div class="form-group-inline">
                        <input type="text" class="form-control" id="mobileNumber" name="mobileNumber" placeholder="Enter mobile number" required />
                        <button type="submit" class="btn btn-primary">@Resource.Search</button>
                    </div>
                    
                </form>

                @if (Model != null && Model.Count > 0)
                {
                    <h3>Results:</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Unique ID</th>
                                <th>@Resource.Name</th>
                                <th>Mobile Number</th>
                                <th>Document Type</th>
                                <th>Document Number</th>
                                <th>Address</th>
                                <th>Registration Date</th>
                                <th>Visiting Date</th>
                                <th>@Resource.PrintPass</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var pass in Model)
                            {
                                <tr>
                                    <td>@pass.Id</td>
                                    <td>@pass.Name</td>
                                    <td>@pass.Mobile</td>
                                    <td>@pass.DocumentType</td>
                                    <td>@(pass.DocumentNumber)</td>
                                    <td>@pass.Address</td>
                                    <td>@pass.RegistrationDate.ToString("yyyy-MM-dd")</td>
                                    <td>@pass.VisitDate.ToString("yyyy-MM-dd")</td>
                                    <td>
                                        <button class="btn btn-secondary" onclick="window.print();">Print</button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }


                <script>
                    function MaskDocumentNumber(docNumber) {
                        if (docNumber.length > 4) {
                            return docNumber.substring(0, 2) + "****" + docNumber.substring(docNumber.length - 2);
                        }
                        return docNumber;
                    }</script>
            </div>
        </div>
    </div>

</div>
